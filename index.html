<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin â€” Amit Portfolio</title>
  <style>
    :root{
      --bg:#0b1220;
      --card:#071126;
      --muted:#9aa4b2;
      --accent:#3b82f6;
      --accent-2:#60a5fa;
      --success:#34d399;
      --danger:#fb7185;
      --glass: rgba(255,255,255,0.03);
      --radius:14px;
      --glass-border: rgba(255,255,255,0.04);
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(600px 600px at 10% 10%, rgba(59,130,246,0.06), transparent 10%),
        radial-gradient(500px 400px at 90% 90%, rgba(96,165,250,0.04), transparent 8%),
        var(--bg);
      color:#e6eef8;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .wrap{
      width:100%;
      max-width:420px;
      display:block;
    }

    /* Right card (now the only card) */
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid var(--glass-border);
      padding:22px;
      border-radius:16px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.6);
      margin: 0 auto;
    }

    .header-row{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}
    .tabs{display:flex;gap:8px;margin-bottom:16px}
    .tab{
      flex:1;text-align:center;padding:10px;border-radius:10px;font-weight:600;cursor:pointer;
      background:transparent;border:1px solid transparent;color:var(--muted);
    }
    .tab.active{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:white;box-shadow:0 8px 20px rgba(59,130,246,0.15);
    }

    form{display:grid;gap:10px}
    label{font-size:13px;color:var(--muted);display:block;margin-bottom:6px}
    input[type="text"], input[type="password"]{
      width:100%;padding:12px;border-radius:10px;border:1px solid var(--glass-border);
      background:var(--glass);color:inherit;font-size:15px;outline:none;
      transition:box-shadow .18s, border-color .18s, transform .08s;
    }
    input:focus{border-color:rgba(59,130,246,0.9);box-shadow:0 6px 30px rgba(59,130,246,0.06);transform:translateY(-1px)}

    .row{display:flex;gap:10px}
    .half{flex:1}

    .actions{display:flex;gap:10px;margin-top:6px;align-items:center}
    .btn{
      background:linear-gradient(90deg,var(--accent),var(--accent-2));
      color:white;padding:10px 14px;border-radius:10px;border:none;font-weight:700;cursor:pointer;
      box-shadow:0 12px 28px rgba(59,130,246,0.12);
    }
    .btn.ghost{
      background:transparent;border:1px solid var(--glass-border);color:var(--muted);font-weight:600;
    }

    .note{font-size:13px;color:var(--muted);margin-top:8px}
    .msg{padding:10px;border-radius:10px;font-weight:600;font-size:14px}
    .msg.error{background:rgba(251,113,133,0.08);color:var(--danger);border:1px solid rgba(251,113,133,0.12)}
    .msg.success{background:rgba(52,211,153,0.06);color:var(--success);border:1px solid rgba(52,211,153,0.08)}

    .pw-row{display:flex;gap:8px;align-items:center}
    /* ---- Blue gradient pw-toggle ---- */
    .pw-toggle{
      padding:8px 12px;
      border-radius:8px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      border: 1px solid rgba(59,130,246,0.4);
      color: #fff;
      cursor: pointer;
      font-size:13px;
      font-weight:600;
      box-shadow: 0 6px 18px rgba(59,130,246,0.18);
      transition: transform .12s ease, opacity .12s ease;
    }
    .pw-toggle:hover{ opacity:0.95; transform: translateY(-1px); }
    .pw-toggle:active{ transform: scale(0.98); }

    .strength{height:8px;border-radius:8px;background:rgba(255,255,255,0.04);overflow:hidden}
    .strength > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#fb7185,#f97316,#34d399);transition:width .3s}

    .small{font-size:13px;color:var(--muted)}

    footer.small{margin-top:14px;text-align:center;color:var(--muted);font-size:13px}

    @media (max-width:520px){
      .wrap{max-width:100%}
    }
  </style>
</head>
<body>
  <div class="wrap" role="main">
    <aside class="card" aria-labelledby="card-title">
      <div class="header-row">
        <div>
          <div style="font-weight:700" id="card-title">Account</div>
          <div style="font-size:13px;color:var(--muted)">Create & Login</div>
        </div>
        <div style="font-size:12px;color:var(--muted)">Site: amitranjan1401.github.io/portfolio</div>
      </div>

      <div class="tabs" role="tablist" aria-label="Account tabs">
        <button class="tab active" data-tab="login" role="tab" aria-selected="true">Login</button>
        <button class="tab" data-tab="create" role="tab" aria-selected="false">Create Account</button>
      </div>

      <!-- LOGIN -->
      <div id="loginPanel">
        <form id="loginForm" onsubmit="return false;">
          <label for="loginId">Admin ID</label>
          <input id="loginId" type="text" autocomplete="username" placeholder="Enter your ID" />

          <label for="loginPass">Password</label>
          <div class="pw-row">
            <input id="loginPass" type="password" autocomplete="current-password" placeholder="Enter password" />
            <button type="button" class="pw-toggle" id="toggleLoginPw" data-target="loginPass" aria-pressed="false">Show</button>
          </div>

          <div class="actions">
            <button class="btn" id="loginBtn" type="button">Login</button>
            <button class="btn ghost" id="toCreate" type="button">Create new</button>
          </div>

          <p id="loginMsg" class="msg" style="display:none;margin-top:12px"></p>
        </form>
      </div>

      <!-- CREATE -->
      <div id="createPanel" style="display:none">
        <form id="createForm" onsubmit="return false;">
          <label for="newId">Choose Admin ID</label>
          <input id="newId" type="text" autocomplete="username" placeholder="e.g. amit" />

          <label for="newPass">Choose Password</label>
          <div class="pw-row">
            <input id="newPass" type="password" autocomplete="new-password" placeholder="At least 6 chars" />
            <button type="button" class="pw-toggle" id="toggleNewPw" data-target="newPass" aria-pressed="false">Show</button>
          </div>

          <label for="confirmPass">Confirm Password</label>
          <input id="confirmPass" type="password" autocomplete="new-password" placeholder="Repeat password" />

          <div style="display:flex;gap:10px;align-items:center;margin-top:6px">
            <div style="flex:1">
              <div class="small">Password strength</div>
              <div class="strength" aria-hidden="true"><i id="strengthBar"></i></div>
            </div>
            <div style="width:120px;text-align:right">
              <button class="btn" id="createBtn" type="button">Create</button>
            </div>
          </div>

          <p id="createMsg" class="msg" style="display:none;margin-top:12px"></p>
        </form>
      </div>

      <footer class="small">Thank You</footer>
    </aside>
  </div>

<script>
  const TARGET_URL = "https://amitranjan1401.github.io/portfolio/";
  const KEY_ACCOUNT = 'PORTFOLIO_ADMIN_ACCOUNT_V2';

  // small helper
  const el = id => document.getElementById(id);

  // Tabs
  document.querySelectorAll('.tab').forEach(t=>{
    t.addEventListener('click',()=>{
      document.querySelectorAll('.tab').forEach(x=>x.classList.remove('active'));
      t.classList.add('active');
      const tab = t.getAttribute('data-tab');
      if(el('loginPanel') && el('createPanel')){
        el('loginPanel').style.display = tab==='login' ? 'block' : 'none';
        el('createPanel').style.display = tab==='create' ? 'block' : 'none';
      }
    });
  });

  // universal toggle (using data-target) â€” robust: set button label based on actual input.type
  document.querySelectorAll('.pw-toggle').forEach(btn=>{
    btn.addEventListener('click', ()=>{
      const tgt = btn.getAttribute('data-target');
      const input = el(tgt);
      if(!input) return;

      // If input is password -> show text, else hide
      if(input.type === 'password'){
        input.type = 'text';
        btn.textContent = 'Hide';
        btn.setAttribute('aria-pressed','true');
      } else {
        input.type = 'password';
        btn.textContent = 'Show';
        btn.setAttribute('aria-pressed','false');
      }
      // keep focus on the input for convenience
      input.focus({preventScroll:true});
    });
  });

  // strength meter
  function passwordStrength(pw){
    let score = 0;
    if(!pw) return 0;
    if(pw.length >= 6) score += 1;
    if(/[A-Z]/.test(pw)) score += 1;
    if(/[0-9]/.test(pw)) score += 1;
    if(/[^A-Za-z0-9]/.test(pw)) score += 1;
    return score;
  }
  function updateStrengthBar(pw){
    const elBar = el('strengthBar');
    if(!elBar) return;
    const pct = (passwordStrength(pw)/4)*100;
    elBar.style.width = pct + '%';
  }
  if(el('newPass')) el('newPass').addEventListener('input', e=>updateStrengthBar(e.target.value));

  // simple storage scheme (demo)
  function saveAccount(obj){ localStorage.setItem(KEY_ACCOUNT, JSON.stringify(obj)); }
  function readAccount(){ const s = localStorage.getItem(KEY_ACCOUNT); return s ? JSON.parse(s) : null; }

  function showMsg(id, text, type='error'){
    const m = el(id);
    if(!m) return;
    m.className = 'msg ' + (type==='success' ? 'success' : 'error');
    m.textContent = text;
    m.style.display = 'block';
  }
  function hideMsg(id){ const m = el(id); if(m) m.style.display = 'none'; }

  // Create account (kept simple here; earlier improved version used PBKDF2)
  if(el('createBtn')) el('createBtn').addEventListener('click', ()=>{
    hideMsg('createMsg');
    try{
      const id = (el('newId')||{}).value?.trim() || '';
      const pass = (el('newPass')||{}).value || '';
      const conf = (el('confirmPass')||{}).value || '';
      if(!id || !pass || !conf){ showMsg('createMsg','Sab fields bhar do.'); return; }
      if(pass.length < 6){ showMsg('createMsg','Password kam se kam 6 characters ka hona chahiye.'); return; }
      if(pass !== conf){ showMsg('createMsg','Password match nahi kar rahe.'); return; }

      // store (demo - plain text) â€” if you want hashed version, tell me and I'll add PBKDF2
      localStorage.setItem('PORTFOLIO_ADMIN_ID', id);
      localStorage.setItem('PORTFOLIO_ADMIN_PASS', pass);
      showMsg('createMsg','Account ban gaya â€” Best of luck! ðŸŽ‰','success');

      setTimeout(()=>{
        const loginTab = document.querySelector('[data-tab="login"]');
        if(loginTab) loginTab.click();
        if(el('loginId')) el('loginId').value = id;
        if(el('loginPass')) el('loginPass').value = '';
        hideMsg('createMsg');
      }, 900);
    }catch(e){
      console.error(e);
      showMsg('createMsg','Storage failed â€” browser settings check karo.');
    }
  });

  // Login
  if(el('loginBtn')) el('loginBtn').addEventListener('click', ()=>{
    hideMsg('loginMsg');
    try{
      const id = (el('loginId')||{}).value?.trim() || '';
      const pass = (el('loginPass')||{}).value || '';
      const savedId = localStorage.getItem('PORTFOLIO_ADMIN_ID');
      const savedPass = localStorage.getItem('PORTFOLIO_ADMIN_PASS');
      if(!savedId || !savedPass){ showMsg('loginMsg','Koi account nahi mila â€” pehle account create karo.'); return; }
      if(!id || !pass){ showMsg('loginMsg','ID aur Password dono dalein.'); return; }
      if(id === savedId && pass === savedPass){
        showMsg('loginMsg','Login successful â€” Best of luck! ðŸŒŸ','success');
        try{ const now = new Date().toISOString().slice(0,16).replace('T',' '); localStorage.setItem('amit_portfolio_last_login', now); }catch(e){}
        setTimeout(()=>{ window.location.href = TARGET_URL; }, 900);
      } else {
        showMsg('loginMsg','Invalid ID ya Password.');
      }
    }catch(e){
      console.error(e);
      showMsg('loginMsg','Login process failed â€” console check karo.');
    }
  });

  // quick switch
  if(el('toCreate')) el('toCreate').addEventListener('click', ()=>{ const t = document.querySelector('[data-tab="create"]'); if(t) t.click(); });

  // enter key accessibility
  ['loginPass','loginId'].forEach(id=>{
    const n = el(id); if(!n) return;
    n.addEventListener('keydown', e=>{ if(e.key === 'Enter'){ const b = el('loginBtn'); if(b) b.click(); } });
  });
  ['newId','newPass','confirmPass'].forEach(id=>{
    const n = el(id); if(!n) return;
    n.addEventListener('keydown', e=>{ if(e.key === 'Enter'){ const b = el('createBtn'); if(b) b.click(); } });
  });

  // prefill
  (function prefill(){ const sid = localStorage.getItem('PORTFOLIO_ADMIN_ID'); if(sid && el('loginId')) el('loginId').value = sid; })();
</script>
</body>
</html>
